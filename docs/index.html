<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <title>Vecino Seguro – Documentación</title>
    <link rel="stylesheet" href="styles.css" />
</head>
<body>
<header>
    <h1>Vecino Seguro</h1>
    <p>
        “Vecino Seguro” es una app Flutter que permite a cualquier ciudadano
        reportar problemas en su comunidad (baches, luminarias fundidas, basura,
        fugas, etc.) y enviarlos automáticamente por WhatsApp y almacenarlos en
        Firestore / Firebase Storage.
    </p>
    <hr />
</header>

<nav>
    <h2>Tabla de contenidos</h2>
    <ul>
        <li><a href="#descripcion-del-proyecto">1. Descripción del proyecto</a></li>
        <li><a href="#instalacion-y-uso">2. Instalación y uso</a></li>
        <li><a href="#caracteristicas-principales">3. Características principales</a></li>
        <li><a href="#pantallas-y-ejemplos">4. Pantallas y ejemplos</a></li>
        <li><a href="#como-contribuir">5. Cómo contribuir</a></li>
        <li><a href="#licencia">6. Licencia</a></li>
        <li><a href="#como-consumir-nuestra-api">7. ¿Cómo consumir nuestra API?</a></li>
    </ul>
    <hr />
</nav>

<main>
    <!-- 1. Descripción del proyecto -->
    <section id="descripcion-del-proyecto">
        <h2>1. Descripción del proyecto</h2>
        <p>
            La aplicación <strong>Vecino Seguro</strong> nació para abordar el ODS 11:
            “Ciudades y comunidades sostenibles”. Permite que los residentes de una zona
            periurbana (por ejemplo, Tlajomulco de Zúñiga, Jalisco) reporten incidencias
            urbanas de forma rápida, almacenando la información en Firebase y notificando
            a las autoridades vía WhatsApp.
        </p>
    </section>

    <!-- 2. Instalación y uso -->
    <section id="instalacion-y-uso">
        <h2>2. Instalación y uso</h2>
        <ol>
            <li>
                Clona el repositorio y navega a la carpeta del proyecto:
                <pre><code>git clone https://github.com/&lt;TU_USUARIO&gt;/vecino_seguro.git
cd vecino_seguro</code></pre>
            </li>
            <li>
                Asegúrate de tener instalado Flutter <code>3.29.2</code> (o superior) con
                Dart <code>3.7.2</code>. Puedes verificarlo así:
                <pre><code>flutter --version</code></pre>
                Si necesitas cambiar de canal o versión, por ejemplo:
                <pre><code>flutter channel stable
flutter upgrade
flutter version 3.29.2</code></pre>
            </li>
            <li>
                Instala dependencias de Dart/Flutter:
                <pre><code>flutter pub get</code></pre>
            </li>
            <li>
                Asegúrate de haber configurado el archivo <code>android/app/google-services.json</code>
                (Android) y <code>ios/Runner/GoogleService-Info.plist</code> (iOS) con las credenciales
                de tu proyecto Firebase.
            </li>
            <li>
                Corre la aplicación en un emulador o dispositivo real:
                <pre><code>flutter run</code></pre>
                (En Android Studio, abre el AVD Manager, elige un emulador y presiona Run).
            </li>
            <li>
                Para generar un APK listo para producción:
                <pre><code>flutter build apk --release</code></pre>
                El APK generado quedará en
                <code>build/app/outputs/flutter-apk/app-release.apk</code>.
            </li>
        </ol>
    </section>

    <!-- 3. Características principales -->
    <section id="caracteristicas-principales">
        <h2>3. Características principales</h2>
        <ul>
            <li>
                <strong>Autenticación anónima</strong><br />
                Cada usuario accede sin registrarse. Firebase Auth crea un usuario anónimo
                para controlar permisos de lectura/escritura en Firestore y Storage.
            </li>
            <li>
                <strong>Creación de reportes</strong>
                <ul>
                    <li>Seleccionar tipo de incidencia: “Bache”, “Luminaria”, “Basura”, “Fuga de agua” u “Otro”.</li>
                    <li>Ingresar ubicación y descripción.</li>
                    <li>Tomar foto opcional desde la cámara.</li>
                    <li>
                        Al presionar “Enviar reporte”, se guardan los datos en Firestore y,
                        opcionalmente, se abre WhatsApp para compartir la incidencia:
                        <pre><code>https://wa.me/5214626214305?text=&lt;texto_codificado&gt;</code></pre>
                    </li>
                </ul>
            </li>
            <li>
                <strong>Visualización de reportes</strong>
                <ul>
                    <li>Pantalla “Mis reportes”: muestra todos los reportes ordenados por fecha.</li>
                    <li>Filtro por estado: “todos” / “pendiente” / “resuelto”.</li>
                    <li>El usuario anónimo puede eliminar sus propios reportes (si así se configura).</li>
                </ul>
            </li>
            <li>
                <strong>Acerca de CEFODEH</strong><br />
                Muestra información de la organización responsable (CEFODEH), junto a botones
                para enviar mensajes por WhatsApp y correo electrónico.
            </li>
        </ul>
    </section>

    <!-- 4. Pantallas y ejemplos -->
    <section id="pantallas-y-ejemplos">
        <h2>4. Pantallas y ejemplos</h2>

        <h3>4.1. Splash Screen</h3>
        <p>
            Al iniciar la app, se muestra durante 3 segundos el logo de CEFODEH y el nombre “Centro de Formación para el Desarrollo Humano”.
        </p>
        <img src="screenshots/splash.png" alt="Splash Screen" style="max-width: 400px;" />

        <h3>4.2. Home</h3>
        <p>Pantalla principal con botones para “Crear reporte”, “Ver reportes” y “Acerca de CEFODEH”.</p>
        <img src="screenshots/home.png" alt="Pantalla Home" style="max-width: 400px;" />

        <h3>4.3. Crear reporte</h3>
        <p>Formulario para seleccionar tipo, ingresar ubicación, descripción y (opcional) tomar foto.</p>
        <img src="screenshots/crear_reporte.png" alt="Pantalla Crear reporte" style="max-width: 400px;" />

        <h3>4.4. Ver reportes</h3>
        <p>Listado de reportes con filtro por estado y opción de eliminar cada uno.</p>
        <img src="screenshots/ver_reportes.png" alt="Pantalla Ver reportes" style="max-width: 400px;" />

        <h3>4.5. Acerca de CEFODEH</h3>
        <p>Información institucional con botones de contacto por WhatsApp y correo.</p>
        <img src="screenshots/acerca_cefodeh.png" alt="Pantalla Acerca de CEFODEH" style="max-width: 400px;" />
    </section>

    <!-- 5. Cómo contribuir -->
    <section id="como-contribuir">
        <h2>5. Cómo contribuir</h2>
        <p>Si quieres ayudar a mejorar <em>Vecino Seguro</em>, sigue estos pasos:</p>
        <ol>
            <li>Haz un <strong>Fork</strong> de este repositorio.</li>
            <li>
                Crea una rama para tu nueva funcionalidad o corrección:
                <pre><code>git checkout -b mi-nueva-funcionalidad</code></pre>
            </li>
            <li>Realiza tus cambios, luego:
                <pre><code>git add .
git commit -m "Descripción breve de la mejora"</code></pre>
            </li>
            <li>Envía tu rama al repositorio remoto:
                <pre><code>git push origin mi-nueva-funcionalidad</code></pre>
            </li>
            <li>Abre un <strong>Pull Request</strong> en GitHub desde tu rama a <code>main</code> en este repositorio.</li>
        </ol>
    </section>

    <!-- 6. Licencia -->
    <section id="licencia">
        <h2>6. Licencia</h2>
        <p>
            Este proyecto está bajo la licencia <strong>MIT</strong>.
            Si aún no tienes un archivo <code>LICENSE</code> en la raíz,
            créalo con el texto estándar de MIT, por ejemplo:
        </p>
        <pre><code>MIT License

Copyright (c) 2025 Tu Nombre

Permission is hereby granted, free of charge, to any person obtaining a copy
... (resto del texto de la licencia MIT) ...
</code></pre>
    </section>

    <!-- 7. ¿Cómo consumir nuestra API? -->
    <section id="como-consumir-nuestra-api">
        <h2>7. ¿Cómo consumir nuestra API?</h2>
        <p>Hemos desplegado una función de Firebase Cloud Functions que devuelve todos los reportes en formato JSON. Para consumirla, sigue estos pasos:</p>

        <h3>7.1. Obtener la URL de la función</h3>
        <p>
            Cuando desplegaste tu función con:
            <code>firebase deploy --only functions:getReportes</code>,
            Firebase te mostró algo como:
        </p>
        <pre><code>Function URL (getReportes(us-central1)):
https://us-central1-mi-app-vecinal.cloudfunctions.net/getReportes</code></pre>
        <p>Reemplaza <code>mi-app-vecinal</code> por el ID de tu proyecto.</p>

        <h3>7.2. Consumirla desde un navegador o Postman</h3>
        <ul>
            <li>
                <strong>En el navegador:</strong> Abre la URL
                <code>https://us-central1-mi-app-vecinal.cloudfunctions.net/getReportes</code>
                Deberías ver un arreglo JSON con todos los reportes almacenados en Firestore.
            </li>
            <li>
                <strong>En Postman:</strong>
                1. Crea una nueva petición <strong>GET</strong>.
                2. Pega la URL
                <code>https://us-central1-mi-app-vecinal.cloudfunctions.net/getReportes</code>
                3. Haz clic en “Send” y verás la respuesta JSON en el cuerpo.
            </li>
        </ul>

        <h3>7.3. Ejemplo de respuesta (formato JSON)</h3>
        <pre><code>[
  {
    "id": "abc123",
    "tipo": "Bache",
    "ubicacion": "Av. Principal #123",
    "descripcion": "Bache grande en la esquina",
    "fotoURL": "https://firebasestorage.googleapis.com/...",
    "fecha": "2025-05-30T18:25:43.511Z",
    "estado": "pendiente",
    "hash": "#SOYVOLUNTARIOCEFODEH"
  },
  {
    "id": "def456",
    "tipo": "Luminaria",
    "ubicacion": "Calle Secundaria 45",
    "descripcion": "La lámpara no enciende",
    "fotoURL": "",
    "fecha": "2025-05-29T14:12:00.000Z",
    "estado": "resuelto",
    "hash": "#SOYVOLUNTARIOCEFODEH"
  }
]
</code></pre>
        <p>
            Cada objeto JSON incluye el <code>id</code> del documento en Firestore y todos
            sus campos (<code>tipo</code>, <code>ubicacion</code>, <code>descripcion</code>,
            <code>fotoURL</code>, <code>fecha</code>, <code>estado</code>, <code>hash</code>).
        </p>
    </section>
</main>

<footer>
    <hr />
    <p style="font-size: 0.9em; text-align: center;">
        &copy; 2025 Jorge Campos – Vecino Seguro |
        <a href="https://github.com/&lt;jorgeecampos&gt;/vecino_seguro" target="_blank">Repositorio en GitHub</a>
    </p>
</footer>
</body>
</html>